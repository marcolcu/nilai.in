<div id="skeleton-loader-table" class="relative w-[55%] ms-5 sm:rounded-lg overflow-hidden bg-gray-50">
    <table class="w-full text-sm rounded-lg text-left rtl:text-right text-gray-500">
        <thead class="text-xs text-gray-700 uppercase bg-gray-50">
            <tr>
                <th scope="col" class="px-6 py-3">
                    Product name
                </th>
                <th scope="col" class="px-6 py-3">
                    <div class="flex items-center">
                        Color
                    </div>
                </th>
                <th scope="col" class="px-6 py-3">
                    <div class="flex items-center">
                        Category
                    </div>
                </th>
                <th scope="col" class="px-6 py-3">
                    <div class="flex items-center">
                        Price
                    </div>
                </th>
                <th scope="col" class="px-6 py-3">
                    <span class="sr-only">Edit</span>
                </th>
            </tr>
        </thead>
        <tbody>
            <!-- Skeleton Loading Rows -->
            <tr class="bg-white border-b animate-pulse">
                <td class="px-6 py-4">
                    <div class="h-4 bg-gray-200 rounded w-3/4"></div>
                </td>
                <td class="px-6 py-4">
                    <div class="h-4 bg-gray-200 rounded w-1/4"></div>
                </td>
                <td class="px-6 py-4">
                    <div class="h-4 bg-gray-200 rounded w-1/2"></div>
                </td>
                <td class="px-6 py-4">
                    <div class="h-4 bg-gray-200 rounded w-1/4"></div>
                </td>
                <td class="px-6 py-4 text-right">
                    <div class="h-4 bg-gray-200 rounded w-1/4 mx-auto"></div>
                </td>
            </tr>
            <tr class="bg-white border-b animate-pulse">
                <td class="px-6 py-4">
                    <div class="h-4 bg-gray-200 rounded w-3/4"></div>
                </td>
                <td class="px-6 py-4">
                    <div class="h-4 bg-gray-200 rounded w-1/4"></div>
                </td>
                <td class="px-6 py-4">
                    <div class="h-4 bg-gray-200 rounded w-1/2"></div>
                </td>
                <td class="px-6 py-4">
                    <div class="h-4 bg-gray-200 rounded w-1/4"></div>
                </td>
                <td class="px-6 py-4 text-right">
                    <div class="h-4 bg-gray-200 rounded w-1/4 mx-auto"></div>
                </td>
            </tr>
            <tr class="bg-white border-b animate-pulse">
                <td class="px-6 py-4">
                    <div class="h-4 bg-gray-200 rounded w-3/4"></div>
                </td>
                <td class="px-6 py-4">
                    <div class="h-4 bg-gray-200 rounded w-1/4"></div>
                </td>
                <td class="px-6 py-4">
                    <div class="h-4 bg-gray-200 rounded w-1/2"></div>
                </td>
                <td class="px-6 py-4">
                    <div class="h-4 bg-gray-200 rounded w-1/4"></div>
                </td>
                <td class="px-6 py-4 text-right">
                    <div class="h-4 bg-gray-200 rounded w-1/4 mx-auto"></div>
                </td>
            </tr>
            <tr class="bg-white border-b animate-pulse">
                <td class="px-6 py-4">
                    <div class="h-4 bg-gray-200 rounded w-3/4"></div>
                </td>
                <td class="px-6 py-4">
                    <div class="h-4 bg-gray-200 rounded w-1/4"></div>
                </td>
                <td class="px-6 py-4">
                    <div class="h-4 bg-gray-200 rounded w-1/2"></div>
                </td>
                <td class="px-6 py-4">
                    <div class="h-4 bg-gray-200 rounded w-1/4"></div>
                </td>
                <td class="px-6 py-4 text-right">
                    <div class="h-4 bg-gray-200 rounded w-1/4 mx-auto"></div>
                </td>
            </tr>
            <tr class="bg-white border-b animate-pulse">
                <td class="px-6 py-4">
                    <div class="h-4 bg-gray-200 rounded w-3/4"></div>
                </td>
                <td class="px-6 py-4">
                    <div class="h-4 bg-gray-200 rounded w-1/4"></div>
                </td>
                <td class="px-6 py-4">
                    <div class="h-4 bg-gray-200 rounded w-1/2"></div>
                </td>
                <td class="px-6 py-4">
                    <div class="h-4 bg-gray-200 rounded w-1/4"></div>
                </td>
                <td class="px-6 py-4 text-right">
                    <div class="h-4 bg-gray-200 rounded w-1/4 mx-auto"></div>
                </td>
            </tr>
            <tr class="bg-white border-b animate-pulse">
                <td class="px-6 py-4">
                    <div class="h-4 bg-gray-200 rounded w-3/4"></div>
                </td>
                <td class="px-6 py-4">
                    <div class="h-4 bg-gray-200 rounded w-1/4"></div>
                </td>
                <td class="px-6 py-4">
                    <div class="h-4 bg-gray-200 rounded w-1/2"></div>
                </td>
                <td class="px-6 py-4">
                    <div class="h-4 bg-gray-200 rounded w-1/4"></div>
                </td>
                <td class="px-6 py-4 text-right">
                    <div class="h-4 bg-gray-200 rounded w-1/4 mx-auto"></div>
                </td>
            </tr>
            <tr class="bg-white animate-pulse">
                <td class="px-6 py-4">
                    <div class="h-4 bg-gray-200 rounded w-3/4"></div>
                </td>
                <td class="px-6 py-4">
                    <div class="h-4 bg-gray-200 rounded w-1/4"></div>
                </td>
                <td class="px-6 py-4">
                    <div class="h-4 bg-gray-200 rounded w-1/2"></div>
                </td>
                <td class="px-6 py-4">
                    <div class="h-4 bg-gray-200 rounded w-1/4"></div>
                </td>
                <td class="px-6 py-4 text-right">
                    <div class="h-4 bg-gray-200 rounded w-1/4 mx-auto"></div>
                </td>
            </tr>
        </tbody>
    </table>
</div>


<div id="main-content-table" class="relative w-[55%] ms-5 sm:rounded-lg overflow-hidden hidden bg-gray-50">
    <table class="w-full text-sm rounded-lg text-left rtl:text-right text-gray-500 bg-gray-50">
        <thead class="text-xs text-gray-700 uppercase bg-gray-50">
            <tr>
                <th scope="col" class="px-6 py-3">
                    ID
                </th>
                <th scope="col" class="px-6 py-3">
                    Nama
                </th>
                <th scope="col" class="px-6 py-3">
                    Deskripsi
                </th>
                <th scope="col" class="px-6 py-3">
                    Jadwal Mulai
                </th>
                <th scope="col" class="px-6 py-3">
                    Jadwal Selesai
                </th>
            </tr>
        </thead>
        <tbody id="table-body-user">
        </tbody>
    </table>
</div>

@section('js-table')
    <script>
        $(document).ready(function() {
            var currentPage = 1;
            var entriesPerPage = 8;
            var allData = [];

            table_courses();
            
            function table_courses() {
                $('#table-body-user').empty();
                $.ajax({
                    url: "api/kursuses",
                    type: "GET",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function(response) {
                        allData = response["kursuses: "];
                        if (allData && allData.length > 0) {
                            renderTable(currentPage);
                        } else {
                            var row = `
                            <tr>
                                <th scope="row" colspan="6" class="px-6 py-4 font-medium text-center text-gray-900 whitespace-nowrap">
                                    No data found
                                </th>
                            </tr>
                            `;
                            $('#table-body-user').append(row);
                        }
                        $('#skeleton-loader-table').hide();
                        $('#table-body-user').show();
                        $('#main-content-table').show();
                    },
                    error: function(xhr, status, error) {
                        console.error(error);
                        var row = `
                        <tr>
                            <th scope="row" colspan="6" class="px-6 py-4 font-medium text-center text-gray-900 whitespace-nowrap">
                                Fetching data error..
                            </th>
                        </tr>
                        `;
                        $('#table-body-user').append(row);
                        $('#skeleton-loader-table').hide();
                        $('#table-body-user').show();
                    }
                });
            }
            
            function renderTable(page) {
                $('#table-body-user').empty();
                var start = (page - 1) * entriesPerPage;
                var end = start + entriesPerPage;
                var paginatedData = allData.slice(start, end);
                
                $.each(paginatedData, function(index, item) {
                        var row = `
                        <tr>
                            <th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">
                                ${item.id}
                            </th>
                            <td class="px-6 py-4">
                                ${item.nama}
                            </td>
                            <td class="px-6 py-4">
                                ${item.deskripsi}
                            </td>
                            <td class="px-6 py-4">
                                ${moment(item.jadwalmulai).format('DD-MM-YYYY')}
                            </td>
                            <td class="px-6 py-4">
                                ${moment(item.jadwalselesai).format('DD-MM-YYYY')}
                            </td>
                        </tr>
                    `;
                    $('#table-body-user').append(row);
                });
            }
        });
    </script>
@endsection